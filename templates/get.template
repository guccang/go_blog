<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GUCCANG/GET</title>
    <link rel="stylesheet" href="/css/get.css">
</head>
<body id="body" class="th_black">
    <!-- Sidebar -->
	<div id="sidebar-container" class="sidebar-container">
		<div id="sidebar" class="sidebar">
            <a href="/link">
                <div class="img-cycle">G</div>
            </a>
            <a href="/link" style="font-size: 24px;">ä¸»é¡µ</a>
			<div class="separator"></div>
            <h2 id="title">{{.TITLE}}</h2>
			<div class="separator"></div>
            <p id="ctime">{{.CTIME}}</p>
			<div class="separator"></div>
            <label for="tags">æ ‡ç­¾</label>
			<input id="tags" type="text" name="tags" value="{{.TAGS}}">
			<div class="separator"></div>
		{{if eq "private" .AUTHTYPE }}
			<label class="custom-radio">
				<input class="radio-left" type="radio" name="auth_type" value="private" checked>
				<span class="radio-btn"><i class="checkmark"></i></span>
                    ç§æœ‰
			</label>
			<label class="custom-radio">
                    <input class="radio-left" type="radio" name="auth_type" value="public">
				<span class="radio-btn"><i class="checkmark"></i></span>
                    å…¬å¼€
			</label>
		{{else}}
			<label class="custom-radio">
                    <input class="radio-left" type="radio" name="auth_type" value="private">
				<span class="radio-btn"><i class="checkmark"></i></span>
                    ç§æœ‰
			</label>
			<label class="custom-radio">
				<input class="radio-left" type="radio" name="auth_type" value="public" checked>
				<span class="radio-btn"><i class="checkmark"></i></span>
                    å…¬å¼€
			</label>
		{{end}}
			<div class="separator"></div>
            <button id="editor-button" class="bottom-button" onclick="submitFirst()">ä¿å­˜ä¿®æ”¹</button>
		</div>
        <div class="bubble" id="bubble">&#9776;</div>
	</div>

    <!-- Main Content -->
	<div class="container">
		<div class="buttons-container">
		<button id="toggle-button" class="right-button" type="button" onclick="onEditor()">ç¼–è¾‘</button>
		</div>
        
		<div class="editor-container">
			<textarea id="editor-inner" class="hide th_black" name="content" wrap="hard">{{.CONTENT}}</textarea>
			<div id="md" class="md"></div>
		</div>
        
		<div class="bottom-container">
		{{ if eq "aes" .ENCRYPT }}
			<div class="decrypt-container">
				<input id="encrypt" type="password" name="encrypt" placeholder="è¾“å…¥è§£å¯†å¯†ç ">
				<button id="decrypt-button" class="decrypt-btn" type="button" onclick="onDecrypt()">ğŸ”“ è§£å¯†</button>
			</div>
		{{end}}
			<button id="delete-button" class="bottom-button" onclick="onDelete()">åˆ é™¤</button>
		</div>

		<div class="comments-section">
			<div class="comments-header">
				<h3 class="comments-title">ğŸ’¬ è¯„è®ºåŒº</h3>
				<button id="comment-show" class="comments-toggle-btn expanded" onclick="onShowComment()">
					<span id="toggle-text">æ”¶èµ·è¯„è®º</span>
					<span id="toggle-icon">â–²</span>
				</button>
			</div>
			
			<div id="comments-container">
				<style>
					/* ç¡®ä¿è¯„è®ºè¡¨å•è¾“å…¥æ¡†å¯è§å’Œå¯äº¤äº’ */
					.comment-form input,
					.comment-form textarea {
						pointer-events: auto !important;
						user-select: text !important;
						-webkit-user-select: text !important;
						-moz-user-select: text !important;
					}
				</style>
				<!-- è¯„è®ºåˆ—è¡¨ -->
				<div id="comments" class="comments-list">
					{{if .COMMENTS}}
						{{range .COMMENTS}}
						<div class="comment-card">
							<div class="comment-header">
								<div class="comment-author">
									<div class="author-avatar">{{slice .OWNER 0 1}}</div>
									<div class="author-info">
										<div class="author-name">{{.OWNER}}</div>
										{{if .MAIL}}<div class="author-email">{{.MAIL}}</div>{{end}}
									</div>
								</div>
								<div class="comment-meta">
									<span class="comment-time">{{.CTIME}}</span>
									<span class="comment-index">#{{.IDX}}</span>
								</div>
							</div>
							<div class="comment-content">
								<p>{{.MSG}}</p>
							</div>
						</div>
						{{end}}
					{{else}}
						<div class="no-comments">
							<div class="no-comments-icon">ğŸ’­</div>
							<p>è¿˜æ²¡æœ‰è¯„è®ºï¼Œæ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</p>
						</div>
					{{end}}
				</div>

				<!-- å‘è¡¨è¯„è®º -->
				<div id="div-comment" class="comment-form-container">
					<h4 class="comment-form-title">âœï¸ å‘è¡¨è¯„è®º</h4>
					<form class="comment-form" onsubmit="return false;">
						<div class="form-row">
							<div class="form-group">
								<label for="input-owner">ç”¨æˆ·å *</label>
								<input id="input-owner" type="text" placeholder="è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å" required>
								<small id="username-hint" class="form-hint">ğŸ’¡ ç”¨æˆ·åå°†ä½œä¸ºæ‚¨çš„èº«ä»½æ ‡è¯†</small>
							</div>
							<div class="form-group">
								<label for="input-mail">é‚®ç®±</label>
								<input id="input-mail" type="email" placeholder="è¯·è¾“å…¥é‚®ç®±ï¼ˆå¯é€‰ï¼‰">
							</div>
						</div>
						<div class="form-group">
							<label for="input-pwd">èº«ä»½å¯†ç </label>
							<input id="input-pwd" type="password" placeholder="ç”¨äºç¡®è®¤æ‚¨çš„èº«ä»½">
							<small class="form-hint">ğŸ’¡ å·²æ³¨å†Œç”¨æˆ·åå¿…é¡»è¾“å…¥æ­£ç¡®å¯†ç æ‰èƒ½è¯„è®º</small>
						</div>
						<div class="form-group">
							<label for="input-comment">è¯„è®ºå†…å®¹ *</label>
							<textarea id="input-comment" rows="4" placeholder="è¯·è¾“å…¥æ‚¨çš„è¯„è®ºå†…å®¹..." required></textarea>
							<div class="comment-input-footer">
								<small class="form-hint">æ”¯æŒæ¢è¡Œï¼Œè¯·æ–‡æ˜å‘è¨€</small>
								<span class="char-count"><span id="char-counter">0</span>/500</span>
							</div>
						</div>
						<div class="form-actions">
							<button id="commit-comment" type="button" onclick="onCommitComment()" class="submit-btn">
								<span class="btn-icon">ğŸ“</span>
								<span class="btn-text">å‘è¡¨è¯„è®º</span>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
	<script src="/js/vim/vim.min.js"></script>
	<script src="/js/marked/marked.min.js"></script>
	<script src="/js/editor.js"></script>
	<script src="/js/utils.js"></script>
	<script src="/js/get.js"></script>
</body>
</html>

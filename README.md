# 博客系统设计与功能总结

## 系统架构设计
- **技术栈**：Go语言后端，HTML/CSS前端
- **数据存储**：
  - 主存储：`blogs_txt`文件夹下的Markdown文件(.md)
  - 缓存：Redis用于提高性能
  - 数据一致性：以`blogs_txt`下的文件为准，启动时同步Redis

## 核心功能模块

### 已完成功能 (标记为OK)
1. **用户认证**
   - 登录系统
   - 基于文本文件的用户配置
   - Cookie支持
   - 最多2个端同时登录(FIFO模型)

2. **博客管理**
   - 添加/编辑/删除博客
   - Markdown编辑与实时预览
   - 博客加密(AES-CBC)
   - 模板功能(每日任务、锻炼等)
   - 二次确认修改提示

3. **权限控制**
   - 博客访问权限(public/private)
   - 文件服务权限控制
   - 密码保护的分享功能

4. **搜索与分类**
   - 全文搜索(标题和内容)
   - 按权限分类搜索($private/$public)
   - 标签(tag)系统
   - 时间排序(修改时间降序)
   - 特殊搜索语法(-ttitle, @tag等)

5. **界面与交互**
   - 响应式设计(手机/PC适配)
   - 主题切换(深色/浅色模式)
   - 侧边栏布局
   - 图片自适应
   - Vim风格的文本编辑
   - 快捷键支持(回车搜索,CTRL+左右箭头导航)

6. **系统配置**
   - 通过博客形式管理配置(sys_conf.md)
   - 网页内重载配置(@reload cfg)
   - 自动限制主页显示博客数量(100条)

### 进行中功能 (标记为DOING)
1. 自动夜间模式(18:55后切换深色主题)
2. 邮件通知系统：
   - 每日任务提醒
   - 博客访问统计
   - public博客被访问通知
3. 按时间查找博客(@time正则表达式)
4. 数据可视化
5. 时间轴页面开发与优化
6. Google Earth集成

### 已知问题
- 分享功能与权限控制的冲突问题(20240204)

## 设计理念
1. **统一数据模型**：所有功能数据(包括配置、统计数据等)都以博客形式存储
2. **可迁移性**：以文本文件为主存储，便于系统迁移
3. **自包含系统**：配置和管理功能都通过博客界面完成

## 扩展功能
- 标签替换(@tag from to)
- 特殊标签支持(@main跳转主页, @timed显示自动添加时间的博客)
- 搜索框自动补全($private/$public)
- 打印反向代理IP日志

该系统设计注重功能性、可维护性和用户体验，通过Markdown文件作为核心数据载体实现了高度灵活的内容管理系统。
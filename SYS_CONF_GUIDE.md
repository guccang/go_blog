# Go Blog 系统配置文件详细说明

## 📋 概述

`sys_conf.md` 是 Go Blog 系统的核心配置文件，采用简单的 `key=value` 格式，控制着系统的各项功能和行为。本文档提供了每个配置项的详细说明和使用指南。

## 📁 文件位置

```
go_blog/
└── blogs_txt/
    └── sys_conf.md    # 系统配置文件
```

## 🔧 配置文件格式

### 基本格式规则
- **格式**: `key=value`
- **注释**: 以 `#` 开头的行为注释行
- **编码**: UTF-8
- **分隔符**: 多个值使用 `|` 分隔

### 示例
```ini
# 这是注释
port=8888                    # 单个值
publictags=vim|linux|java   # 多个值用|分隔
```

---

## 🌐 服务器配置

### port
- **功能**: HTTP服务监听端口
- **默认值**: `8888`
- **类型**: 整数
- **说明**: 设置Web服务器监听的端口号
- **示例**: 
  ```ini
  port=8888
  ```
- **注意事项**: 
  - 确保端口未被其他程序占用
  - 生产环境建议使用标准端口（80/443）配合反向代理

---

## 💾 Redis数据库配置

### redis_ip
- **功能**: Redis服务器IP地址
- **默认值**: `127.0.0.1`
- **类型**: IP地址
- **说明**: Redis数据库服务器的IP地址
- **示例**:
  ```ini
  redis_ip=127.0.0.1          # 本地Redis
  redis_ip=192.168.1.100      # 远程Redis
  ```

### redis_port
- **功能**: Redis服务器端口
- **默认值**: `6379`
- **类型**: 整数
- **说明**: Redis数据库服务器的监听端口
- **示例**:
  ```ini
  redis_port=6379             # 默认端口
  redis_port=6666             # 自定义端口
  ```

---

## 📚 内容管理配置

### publictags
- **功能**: 公开标签列表
- **默认值**: `vim|linux|holocubic|五行01|五月天`
- **类型**: 字符串列表（用`|`分隔）
- **说明**: 定义哪些标签的博客可以公开访问
- **用途**: 
  - 控制博客的可见性
  - 实现内容分类展示
- **示例**:
  ```ini
  publictags=技术|生活|读书|旅行
  ```

### sysfiles
- **功能**: 系统文件列表
- **默认值**: `sys_conf`
- **类型**: 字符串列表（用`|`分隔）
- **说明**: 标记为系统文件的博客，通常不在普通列表中显示
- **示例**:
  ```ini
  sysfiles=sys_conf|help|about
  ```

### title_auto_add_date_suffix
- **功能**: 自动添加日期后缀的标题前缀
- **默认值**: `每日任务|锻炼|反思|任务|日记|learn-english|周计划|月计划|年计划|个人记录|个人成长`
- **类型**: 字符串列表（用`|`分隔）
- **说明**: 匹配这些前缀的博客标题会自动添加日期后缀
- **功能逻辑**: 
  - 如标题为"每日任务"，系统会自动改为"每日任务_2024-01-15"
  - 避免同类型博客标题重复
- **示例**:
  ```ini
  title_auto_add_date_suffix=日报|周报|月报|总结
  ```

### diary_keywords
- **功能**: 日记关键字
- **默认值**: `日记_|私人日记_|个人记录_|心情日记_|个人成长_|sys_conf`
- **类型**: 字符串列表（用`|`分隔）
- **说明**: 包含这些关键字的博客会被标记为日记类型
- **特殊处理**: 
  - 需要密码访问
  - 不在公开列表中显示
  - 可能有特殊的权限控制
- **示例**:
  ```ini
  diary_keywords=私密_|个人_|心情_|感悟_
  ```

---

## 👤 用户认证配置

### admin
- **功能**: 管理员用户名
- **默认值**: `admin`
- **类型**: 字符串
- **说明**: 系统管理员的用户名
- **用途**: 
  - 后台管理登录
  - 权限控制
- **安全建议**: 
  - 避免使用默认值
  - 定期更换

### pwd
- **功能**: 登录密码
- **默认值**: `123456`
- **类型**: 字符串
- **说明**: 系统登录密码
- **安全要求**:
  - 建议使用强密码
  - 包含大小写字母、数字、特殊字符
  - 长度不少于8位
- **⚠️ 安全警告**: 示例中的默认密码过于简单，生产环境必须更改

### diary_password
- **功能**: 日记访问密码
- **默认值**: `diary_2025`
- **类型**: 字符串
- **说明**: 访问日记类型博客需要的密码
- **用途**: 
  - 保护私人内容
  - 二级访问控制

---

## 🤖 AI集成配置

### deepseek_api_key
- **功能**: DeepSeek API密钥
- **默认值**: `sk-xxx`
- **类型**: 字符串
- **说明**: 用于访问DeepSeek AI服务的API密钥
- **用途**: 
  - AI助手功能
  - 智能内容生成
  - 自动摘要等
- **⚠️ 安全提醒**: API密钥应妥善保管，避免泄露

### deepseek_api_url
- **功能**: DeepSeek API基础URL
- **默认值**: `https://api.deepseek.com/chat/completions`
- **类型**: URL
- **说明**: DeepSeek AI服务的API接口地址
- **用途**: 配置AI服务端点

---

## 🔗 分享和通知配置

### share_days
- **功能**: 分享链接有效天数
- **默认值**: `7`
- **类型**: 整数
- **说明**: 博客分享链接的有效期（天）
- **用途**: 
  - 控制分享链接的安全性
  - 避免长期暴露敏感内容

### sms_phone
- **功能**: 短信推送电话号码
- **默认值**: `1521084xxxx`
- **类型**: 电话号码
- **说明**: 接收系统通知短信的手机号码
- **用途**: 
  - 系统异常通知
  - 重要事件提醒

### sms_send_url
- **功能**: 短信发送API地址
- **默认值**: `https://push.spug.cc/send/xxxx`
- **类型**: URL
- **说明**: 短信服务提供商的API接口
- **服务商**: `https://push.spug.cc/`

---

## 📂 路径配置

### download_path
- **功能**: 下载路径
- **默认值**: `/data/release/blogs`
- **类型**: 文件路径
- **说明**: 博客导出和下载文件的存储路径
- **注意事项**: 
  - 确保路径存在且有写权限
  - 定期清理避免占用过多空间

### statics_path
- **功能**: 静态资源路径
- **默认值**: `./statics`
- **类型**: 文件路径
- **说明**: CSS、JS、图片等静态文件的存储路径
- **包含内容**: 
  - CSS样式文件
  - JavaScript脚本
  - 图片资源
  - 字体文件

### templates_path
- **功能**: 模板文件路径
- **默认值**: `./templates`
- **类型**: 文件路径
- **说明**: HTML模板文件的存储路径
- **包含内容**: 
  - 页面模板
  - 邮件模板
  - 组件模板

---

## 🎛️ 显示配置

### main_show_blogs
- **功能**: 主页显示博客数量
- **默认值**: `67`
- **类型**: 整数
- **说明**: 主页列表显示的博客数量
- **用途**: 
  - 控制页面加载速度
  - 优化用户体验
- **建议**: 根据服务器性能和用户需求调整

### help_blog_name
- **功能**: 帮助页面博客名称
- **默认值**: `help`
- **类型**: 字符串
- **说明**: 作为帮助文档的博客名称
- **用途**: 
  - 系统使用说明
  - 功能介绍
  - 常见问题

---

## 📝 配置文件管理

### 修改配置
1. **备份原文件**
   ```bash
   cp blogs_txt/sys_conf.md blogs_txt/sys_conf.md.backup
   ```

2. **编辑配置**
   ```bash
   vim blogs_txt/sys_conf.md
   ```

3. **重启服务**
   ```bash
   ./scripts/restart.sh
   ```

### 配置验证
- 检查语法格式是否正确
- 验证端口是否可用
- 测试Redis连接
- 验证文件路径权限

### 配置热更新
部分配置可能支持热更新，无需重启服务：
- 显示相关配置
- 内容管理配置
- 路径配置（需验证）

---

## ⚠️ 安全注意事项

### 敏感信息保护
1. **API密钥**: 定期轮换，避免硬编码
2. **密码**: 使用强密码，定期更换
3. **数据库**: 限制访问权限，启用认证
4. **文件权限**: 设置适当的文件访问权限

### 权限配置
```bash
# 设置配置文件权限
chmod 600 blogs_txt/sys_conf.md

# 设置目录权限
chmod 755 blogs_txt/
```

---

## 🔍 故障排除

### 常见问题

#### 1. 端口占用
```bash
# 检查端口占用
lsof -i :8888
netstat -tulpn | grep 8888

# 解决方案
kill -9 <PID>
# 或修改配置中的端口号
```

#### 2. Redis连接失败
```bash
# 检查Redis状态
redis-cli -h 127.0.0.1 -p 6379 ping

# 检查配置
grep redis_ blogs_txt/sys_conf.md
```

#### 3. 路径不存在
```bash
# 创建必要目录
mkdir -p /data/release/blogs
mkdir -p ./statics
mkdir -p ./templates

# 设置权限
chmod 755 /data/release/blogs
```

#### 4. 配置格式错误
- 检查是否有多余空格
- 验证特殊字符是否正确转义
- 确认编码为UTF-8

---

## 📊 配置优化建议

### 性能优化
1. **Redis配置**: 根据内存使用情况调整
2. **显示数量**: 根据访问量调整主页显示数量
3. **缓存策略**: 合理设置缓存过期时间

### 安全优化
1. **定期更换密码和密钥**
2. **启用访问日志**
3. **配置IP白名单**
4. **使用HTTPS**

### 功能优化
1. **标签管理**: 定期整理公开标签
2. **内容分类**: 完善日记关键字
3. **自动化**: 利用自动添加日期功能

---

## 📚 相关文档

- [编译配置说明](BUILD_GUIDE.md)

---

## 🔄 版本历史

- **v1.0**: 初始版本
- **v1.1**: 添加AI集成配置
- **v1.2**: 增强安全配置

---

*最后更新: 2024年
*文档版本: v1.2